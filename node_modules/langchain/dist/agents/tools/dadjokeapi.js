"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.DadJokeAPI = void 0;
const node_fetch_1 = __importDefault(require("node-fetch"));
const base_1 = require("./base");
class DadJokeAPI extends base_1.Tool {
    constructor() {
        super();
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "description", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.name = "dadjoke";
        this.description =
            "a dad joke generator. get a dad joke about a specific topic. input should be a search term.";
    }
    async call(input) {
        const headers = { Accept: "application/json" };
        const searchUrl = `https://icanhazdadjoke.com/search?term=${input}`;
        const response = await (0, node_fetch_1.default)(searchUrl, { headers });
        if (!response.ok) {
            throw new Error(`HTTP error ${response.status}`);
        }
        const data = await response.json();
        const jokes = data.results;
        if (jokes.length === 0) {
            return `No dad jokes found about ${input}`;
        }
        const randomIndex = Math.floor(Math.random() * jokes.length);
        const randomJoke = jokes[randomIndex].joke;
        return randomJoke;
    }
}
exports.DadJokeAPI = DadJokeAPI;
//# sourceMappingURL=dadjokeapi.js.map