"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const buffer_window_memory_1 = require("../buffer_window_memory");
(0, globals_1.test)("Test buffer memory", async () => {
    const memory = new buffer_window_memory_1.BufferWindowMemory({ k: 1 });
    const result1 = await memory.loadMemoryVariables({});
    (0, globals_1.expect)(result1).toStrictEqual({ history: "" });
    const llmResult = new Promise((resolve, _reject) => {
        resolve({ bar: "foo" });
    });
    await memory.saveContext({ foo: "bar" }, llmResult);
    const expectedString = "\nHuman: bar\nAI: foo";
    const result2 = await memory.loadMemoryVariables({});
    (0, globals_1.expect)(result2).toStrictEqual({ history: expectedString });
    const llmResult2 = new Promise((resolve, _reject) => {
        resolve({ bar: "foo" });
    });
    await memory.saveContext({ foo: "bar1" }, llmResult2);
    const expectedString3 = "\nHuman: bar1\nAI: foo";
    const result3 = await memory.loadMemoryVariables({});
    (0, globals_1.expect)(result3).toStrictEqual({ history: expectedString3 });
});
//# sourceMappingURL=buffer_window_memory.test.js.map