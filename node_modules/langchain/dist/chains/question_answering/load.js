"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.loadQAChain = void 0;
const llm_chain_1 = require("../llm_chain");
const combine_docs_chain_1 = require("../combine_docs_chain");
const stuff_prompts_1 = require("./stuff_prompts");
const map_reduce_prompts_1 = require("./map_reduce_prompts");
const loadQAChain = (llm, params = {}) => {
    const { prompt = stuff_prompts_1.DEFAULT_QA_PROMPT, combineMapPrompt = map_reduce_prompts_1.DEFAULT_COMBINE_QA_PROMPT, combinePrompt = map_reduce_prompts_1.COMBINE_PROMPT, type = "stuff", } = params;
    if (type === "stuff") {
        const llmChain = new llm_chain_1.LLMChain({ prompt, llm });
        const chain = new combine_docs_chain_1.StuffDocumentsChain({ llmChain });
        return chain;
    }
    if (type === "map_reduce") {
        const llmChain = new llm_chain_1.LLMChain({ prompt: combineMapPrompt, llm });
        const combineLLMChain = new llm_chain_1.LLMChain({ prompt: combinePrompt, llm });
        const combineDocumentChain = new combine_docs_chain_1.StuffDocumentsChain({
            llmChain: combineLLMChain,
            documentVariableName: "summaries",
        });
        const chain = new combine_docs_chain_1.MapReduceDocumentsChain({
            llmChain,
            combineDocumentChain,
        });
        return chain;
    }
    throw new Error(`Invalid _type: ${type}`);
};
exports.loadQAChain = loadQAChain;
//# sourceMappingURL=load.js.map